Metadata-Version: 2.1
Name: webdriver-helper
Version: 2.2.0
Summary: è‡ªåŠ¨ä¸‹è½½æµè§ˆå™¨é©±åŠ¨ï¼Œä½¿selenium 4.0å¼€ç®±å³ç”¨ï¼Œå¹¶ä¸€äº›æé«˜å¢å¼ºçš„åŠŸèƒ½
License: Apache-2.0
Author-email: dongfangtianyu <7629022+dongfangtianyu@users.noreply.github.com>
Requires-Python: >=3.9
Requires-Dist: Appium-Python-Client>=2.6.0
Requires-Dist: parse==1.19.0
Requires-Dist: selenium>=4.0.0
Requires-Dist: webdriver-manager==3.8.5
Project-URL: Homepage, https://github.com/dongfangtianyu/webdriver-helper
Description-Content-Type: text/markdown

# WebDriveråŠ©æ‰‹

WebDriveråŠ©æ‰‹ï¼ˆwebdriver-helplerï¼‰æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œé€šè¿‡å¢åŠ ä¸€äº›é¢å¤–çš„èƒ½åŠ›ï¼Œè®©seleniumæ›´åŠ å¥½ç”¨

- ğŸ˜Š è‡ªåŠ¨**ä¸‹è½½**åˆé€‚çš„æµè§ˆå™¨é©±åŠ¨ï¼ˆå›½å†…é•œåƒåŠ é€Ÿï¼‰
- ğŸ˜Š è‡ªåŠ¨**åˆ›å»º**å’Œè¿”å›WebDriverå¯¹è±¡ï¼ˆæœ¬åœ°æµè§ˆå™¨æˆ–è¿œç¨‹æµè§ˆå™¨ï¼‰
- ğŸ˜Š å¯ä»¥**è°ƒè¯•**Pythonå’Œæµè§ˆå™¨ï¼ˆChromiumå†…æ ¸ï¼‰
- ğŸ˜Š å¯ä»¥**æ‹–æ‹½**ä¸Šä¼ æ–‡ä»¶
- ğŸ˜Š å¯ä»¥**ä¿®æ”¹**æ–‡ä»¶ä¸‹è½½ç›®å½•ï¼ˆChromiumå†…æ ¸ï¼‰
- ğŸ˜Š å¯ä»¥**è®¾ç½®**æ€è€ƒæ—¶é—´ï¼ˆå®éªŒæ€§ï¼‰
- ğŸ˜Š å†…ç½®äº†Base Pageä»¥ä¾¿è¿›è¡Œ**POMå°è£…**



>    æœ¬æ–‡è®°å½•äº†webdriver_helpler==2.2.0çš„ä½¿ç”¨è¯´æ˜ï¼Œå¦‚æœä¸å®é™…ä½¿ç”¨ç‰ˆæœ¬å·®å¼‚è¾ƒå¤§ï¼Œåˆ™å¯èƒ½éƒ¨åˆ†å†…å®¹ä¸å‡†ç¡®



## ç¯å¢ƒè¦æ±‚

-   Python >= 3.9

-   Selenium >=4.1



## ç”¨æ³•

ç”¨æ³•æœ‰2éƒ¨åˆ†ï¼š

-   Driverï¼š å¯¹seleniumçš„å¢å¼ºï¼Œæä¾›ä¾¿æ·å®ä¾‹åŒ–webdriverçš„å‡½æ•°
-   POMï¼šå®šä¹‰basepageï¼Œä»¥ä¾¿å¿«é€Ÿå®ç°POM

### 1. Driver

åŸºæœ¬ç”¨æ³•

```python
driver = get_webdriver(
        "android",  # å¯åŠ¨ç±»å‹ï¼šchromeï¼Œedgeï¼Œ firefoxï¼Œie, android, ios
        hub="http://127.0.0.1:4723/wd/hub",  # é€‰å¡«ï¼Œappiumæˆ–è€…selenium gridåœ°å€
        capabilities={ # é€‰å¡«ï¼Œä»…åœ¨android, ios æ—¶æœ‰æ•ˆ
            "app": "D:\\Go\\automaster_release_1.3.apk",
            "noReset": True,
            "dontStopAppOnReset": True,
        },  
    )
driver.quit()
```



#### 1. å¯åŠ¨æµè§ˆå™¨

```python
from webdriver_helper import get_webdriver

chrome = get_webdriver()  # é»˜è®¤å¯åŠ¨chromeï¼Œ å¯åŠ¨æ—¶ä¸‹è½½åˆé€‚çš„æµè§ˆå™¨é©±åŠ¨
chrome.get("https://baidu.com")
chrome.quit()

firefox = get_webdriver("fireFOX")  # ä¹Ÿå¯æŒ‡å®šfirefoxï¼Œå¤§å°å†™ä¸æ•æ„Ÿ
firefox.quit()
```



#### 2. è®¾ç½®æµè§ˆå™¨å¯åŠ¨å‚æ•°

>   è®¾ç½®æµè§ˆå™¨å‚æ•°ï¼Œåªéœ€åœ¨å¯åŠ¨æ—¶ä¼ é€’optionså³å¯

```python
from selenium import webdriver
from webdriver_helper import get_webdriver

option = webdriver.ChromeOptions()  # åˆ›å»ºOptionå¯¹è±¡
option.add_argument("--headless")  # æ— å¤´æ¨¡å¼

chrome = get_webdriver(options=webdriver.ChromeOptions())  # ä¼ é€’Optionå‚æ•°
chrome.quit()

firefox = get_webdriver("firefox", options=webdriver.FirefoxOptions())
firefox.quit()

```



#### 3. å¯åŠ¨è¿œç¨‹æµè§ˆå™¨

```python
from webdriver_helper import get_webdriver

driver = get_webdriver('firefox', hub="http://127.0.0.1:4444/wd/hub") 
# hubå‚æ•°æŒ‡å®šselenium grdiçš„åœ°å€ï¼Œä¾¿å¯å¯åŠ¨è¿œç¨‹æµè§ˆå™¨
# å¯åŠ¨è¿œç¨‹æµè§ˆå™¨æ—¶åŒæ ·å¯ä»¥ä¼ é€’optionså‚æ•°ï¼Œè¿™é‡Œçœç•¥äº†

driver.get("https://baidu.com")
driver.quit()
```



#### 4. é“¾æ¥Androidæˆ–iOS

```python
from webdriver_helper import get_webdriver

driver = get_webdriver('android', hub="http://127.0.0.1:4723/wd/hub") 
# hubå‚æ•°æŒ‡å®šappiumçš„åœ°å€ï¼Œä¾¿å¯å¯åŠ¨è¿œç¨‹è®¾å¤‡Androidæˆ–iOS
# å¯åŠ¨è¿œç¨‹è®¾å¤‡æ—¶åŒæ ·å¯ä»¥ä¼ é€’optionså‚æ•°ï¼Œè¿™é‡Œçœç•¥äº†
# å¯åŠ¨è¿œç¨‹è®¾å¤‡æ—¶ä¼ é€’é¢å¤–çš„capabilitieså‚æ•°ï¼Œè¿™é‡Œçœç•¥äº†

driver.quit()
```





#### 4. è¿›å…¥æµè§ˆå™¨è°ƒè¯•æ¨¡å¼

>   ä»…æ”¯æŒChromiumå†…æ ¸ï¼Œå¦‚Chromeã€Edge

```python
from webdriver_helper import debugger, get_webdriver

chrome = get_webdriver()  # é»˜è®¤å¯åŠ¨chrome
chrome.get("https://baidu.com")

debugger(chrome)  # è¿›å…¥è°ƒè¯•æ¨¡å¼ï¼Œæµè§ˆå™¨å’Œpythonå°†è¢«æŒ‚èµ·
# åœ¨æ§åˆ¶è¾“å…¥`c`å¹¶æŒ‰ä¸‹å›è½¦ ï¼Œé€€å‡ºè°ƒè¯•æ¨¡å¼

chrome.quit()
```

#### 4. æ–‡ä»¶æ‹–æ‹½ä¸Šä¼ 

```python
from webdriver_helper import debugger, get_webdriver
from selenium.webdriver.common.by import By

chrome = get_webdriver()  # é»˜è®¤å¯åŠ¨chrome

chrome.get("http://118.24.147.95:8086/upload.html")

ele = chrome.find_element(By.XPATH, "/html/body/div[2]/div")  # å®šä½è¦æ‹–æ”¾æ–‡ä»¶çš„å…ƒç´ 
ele.upload_by_drop('img.jpg')  # å°†æ–‡ä»¶`img.jpg`ä¸Šä¼ 

```



#### 5. è®¾ç½®ä¸‹è½½ç›®å½•

>   ä»…æ”¯æŒChromiumå†…æ ¸ï¼Œå¦‚Chromeã€Edge

```python
import os
import time

from webdriver_helper import get_webdriver

driver = get_webdriver()  # å¯åŠ¨æµè§ˆå™¨

# å°†æµè§ˆå™¨ä¸‹è½½ç›®å½•è®¾ç½®ä¸ºå½“å‰ç›®å½•ä¸‹çš„downloadï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º
driver.set_download_path("./download")

# è®¿é—®ä¸‹è½½é“¾æ¥ï¼Œè‡ªåŠ¨è¿›è¡Œä¸‹è½½
driver.get("https://api.tttt.one/httpbin/stream-bytes/1024")

time.sleep(3)  # ç­‰å¾…ä¸‹è½½å®Œæˆ

assert os.path.exists("./download/1024")  # æ–­è¨€æ–‡ä»¶ä¸‹è½½æˆåŠŸ

```



#### 6. è®¾ç½®æ€è€ƒæ—¶é—´

>   å®éªŒæ€§åŠŸèƒ½ï¼Œé™ä½è‡ªåŠ¨åŒ–é€Ÿåº¦ï¼Œä½¿è¡Œä¸ºæ›´åƒçœŸäºº
>
>   å¸¸ç”¨äºçˆ¬è™«ï¼Œæˆ–é¡µé¢åŠ è½½è¾ƒæ…¢åˆä¸æƒ³å†™å¤ªå¤šç­‰å¾…ä»£ç çš„åœºæ™¯

```python
from webdriver_helper import get_webdriver

driver = get_webdriver() # å¯åŠ¨æµè§ˆå™¨

# driveræ¯ä¸ªåŠ¨ä½œä¹‹é—´åœé¡¿0.5~1ç§’é’Ÿï¼Œå¯ä»¥æé«˜é¡µé¢å¼‚æ­¥æˆåŠŸç‡ï¼Œé™ä½åçˆ¬è§¦å‘æœºç‡
driver.set_think_time(0.5)

```



### 2. POM

#### 1. ä¸»è¦ç‰¹ç‚¹

1. POå®ä¾‹åŒ–æ—¶**è‡ªåŠ¨éªŒè¯**URLå’Œå…ƒç´ 
2. å…ƒç´ å®šä½æ—¶**è‡ªåŠ¨ç­‰å¾…**
3. å…ƒç´ äº¤äº’æ—¶**è‡ªåŠ¨ç­‰å¾…**
4. å†…ç½®å¸¸ç”¨çš„**äº¤äº’åŠ¨ä½œ**ï¼šç‚¹å‡»ã€è¾“å…¥ã€æ–‡ä»¶ä¸Šä¼ ã€ä¸‹æ‹‰é€‰æ‹©
5. æ”¯æŒä½¿ç”¨**jså¼ºåˆ¶å®Œæˆ**å¸¸ç”¨çš„äº¤äº’åŠ¨ä½œ
6. å†…ç½®`AlertPage`å®ç°å¯¹alertä¾¿æ·æ“ä½œï¼ˆå¯¹alertä¹Ÿä¼š**è‡ªåŠ¨ç­‰å¾…**ï¼‰
7. ä¸ºPyCharmæä¾›å®Œç¾**è¯­æ³•æç¤º**å’Œ**è‡ªåŠ¨è¡¥å…¨**



#### 2. ä½¿ç”¨ç¤ºä¾‹

```python
from webdriver_helper.pom import * # å¯¼å…¥æ¨¡å—


# 1. å®šä¹‰Page
class LoginPage(BasePage): # ç»§æ‰¿BasePgae å®šä¹‰PO
    # å®šä¹‰url å±æ€§ï¼Œå¯ä»¥å®ç°é¡µé¢è·³è½¬ï¼Œå’Œurlæ ¡éªŒ
    url = "http://101.34.221.219:8010/?s=user/logininfo.html" 
    
    # å±æ€§å³å…ƒç´ ï¼Œåœ¨æ­¤å®šä¹‰çš„LazyElementå¯ä»¥å®ç°å…ƒç´ è‡ªåŠ¨å®šä½å’ŒåŠ è½½æ ¡éªŒ
    ipt_username = LazyElement(By.XPATH, "//form/div[1]/input" )
    ipt_password = LazyElement(By.XPATH, "//form/div[2]/div/input")
    btn_submit = LazyElement(By.XPATH, "//form/div[3]/button")
    
    # å¯¹äºåŠ¨æ€å‡ºç°çš„å…ƒç´ ï¼Œé€šè¿‡check_on_init=Falseï¼Œå…å»åœ¨POå®ä¾‹åŒ–æ—¶çš„è‡ªåŠ¨æ ¡éªŒ
    p_msg = LazyElement(
        By.XPATH,
        '//p[@class="prompt-msg"]',
        check_on_init=False, 
    )

    def login(self, username, password):
         # send_keys æ–¹æ³•è¿›è¡Œè¾“å…¥ï¼Œä¼šè‡ªåŠ¨ç­‰å¾…å…ƒç´ å¤„äºå¯è¾“å…¥çŠ¶æ€
        self.send_keys(self.ipt_username, username)
        self.send_keys(self.ipt_password, password)
        
         # click æ–¹æ³•è¿›è¡Œç‚¹å‡»ï¼Œä¼šè‡ªåŠ¨ç­‰å¾…å…ƒç´ å¤„äºå¯ç‚¹å‡»çŠ¶æ€
        self.click(self.btn_submit)

        return self.p_msg.text # ä½¿ç”¨å¦ä¸€ä¸ªå…ƒç´ æ—¶ï¼ŒåŒæ ·ç›´æ¥è®¿é—®å±æ€§å³å¯


# 2. ä½¿ç”¨PO
def test_login(driver):
    # è·³è½¬åˆ°ç™»é™†é¡µé¢å¹¶å®ä¾‹åŒ–POï¼Œè‡ªåŠ¨æ£€æŸ¥URLã€å…ƒç´ æ˜¯å¦æ­£ç¡®
    page = LoginPage.start(driver)  
    
    # è°ƒç”¨POæ–¹æ³•ï¼Œå®Œæˆè‡ªåŠ¨åŒ–æ“ä½œ
    msg = page.logon("admin", "123456") 
    
    assert  msg == 'å¯†ç é”™è¯¯'  # æ–­è¨€poè¿”å›å€¼
```



#### 3. PyCharmè‡ªåŠ¨è¡¥å…¨

-   è®¿é—®POæ–¹æ³•æ—¶ï¼Œè‡ªåŠ¨è¡¥å…¨

   ![è®¿é—®POæ–¹æ³•æ—¶ï¼Œè‡ªåŠ¨è¡¥å…¨](images/image-20220720143639253.png)

-   è®¿é—®POå…ƒç´ æ—¶ï¼Œè‡ªåŠ¨è¡¥å…¨


   ![è®¿é—®POå…ƒç´ æ—¶ï¼Œè‡ªåŠ¨è¡¥å…¨](images/image-20220720143655135.png)



## è”ç³»ä½œè€…

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

-   emailï¼š**dongfangtianyu@gmail.com**

-   vx:  **python_sanmu** 

